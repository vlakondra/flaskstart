{% extends "layout.html" %}

{% block content %}
<div class="container small-form">
    <form action={{url_for('general.savefile')}} enctype="multipart/form-data" method="POST">
        <div class="file has-name">
            <label class="file-label">
                <input class="file-input" type="file" name="datafile">
                <span class="file-cta">
                    <span class="file-icon">
                        <i class="fas fa-upload"></i>
                    </span>
                    <span class="file-label">
                        Выберите файл…
                    </span>
                </span>
                <span class="file-name">
                    Здесь м.б. описание файла
                </span>
            </label>
        </div>
        <div>
            <input class="button" type="submit" value="Отправить">
        </div>
        {% if request.args.get('message')%}
        <div class="message is-success">
            {{ request.args.get('message') }}
        </div>
        {% endif %}
    </form>

</div>

<style>
    form {
        width: 100%;
        margin: 30px;
    }

    .small-form {
        width: 400px;
    }

    h1 {
        color: red
    }
</style>
{%endblock%}

{%block scripts%}
<script>
    const fileInput = document.querySelector('.file input[type=file]');
    fileInput.onchange = () => {
        if (fileInput.files.length > 0) {
            const fileName = document.querySelector('.file .file-name');
            fileName.textContent = fileInput.files[0].name;
        }
    }
</script>
{%endblock%}